"use strict";(function($){function getAsyncDataUrl($element){let url=$element.data("async-url");if(url){return url}url=$element.data("url");if(url){return url}console.warn("No async data URL found ('data-async-url', 'data-url'). Async update might fail.",$element[0]);return undefined}function wireCreateButtons(){$(".modal-fk-create").not(".bmf-bound").each(function(){const $btn=$(this);const formUrl=$btn.data("href");const selectTargetSelector=$btn.data("select");const modalTargetId=$btn.data("modal-target")||"#modal";const asyncDataUrl=getAsyncDataUrl($btn);const targetElementId=$btn.data("for-field");if(!formUrl){console.warn('wireCreateButtons: Button missing required "data-href" attribute. Skipping.',$btn[0]);return}if(!selectTargetSelector){console.warn('wireCreateButtons: Button missing required "data-select" attribute. Skipping.',$btn[0]);return}const $select=$(selectTargetSelector);if(!$select.length){console.warn(`wireCreateButtons: Target select element "${selectTargetSelector}" not found for button. Skipping.`,$btn[0]);return}$btn.addClass("bmf-bound");$btn.modalForm({formURL:formUrl,modalID:modalTargetId,errorClass:".is-invalid",asyncUpdate:true,asyncSettings:{closeOnSubmit:true,successMessage:'<div class="alert alert-success d-none" role="alert">Operation successful.</div>',dataUrl:asyncDataUrl,dataElementId:targetElementId,dataKey:"options",addModalFormFunction:wireCreateButtons}})})}$(document).ready(wireCreateButtons)})(jQuery);