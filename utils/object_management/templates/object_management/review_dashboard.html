{% extends "filtered_list.html" %}
{% load static %}
{% load moderation_tags %}
{% load custom_tags %}
{% load crispy_forms_tags %}

{% block title %}
    BRIT | {{ title }}
{% endblock title %}

{% block list_card_header %}
    <strong><i class="fas fa-clipboard-check"></i> {{ title }}</strong>
{% endblock list_card_header %}

{% block list_table %}
    {% if review_items %}
        <div class="table-responsive">
            <table class="table modern-table">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Name</th>
                        <th>Owner</th>
                        <th>Submitted</th>
                        <th class="actions-column">Status/Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for object in review_items %}
                        <tr>
                            <td data-label="Type">
                                <span class="badge bg-secondary">{{ object.verbose_name|default:"Item" }}</span>
                            </td>
                            <td data-label="Name">
                                <a href="{% detail_or_review_url object use_back=True %}">{{ object.name|default:object }}</a>
                            </td>
                            <td data-label="Owner">{{ object.owner.username }}</td>
                            <td data-label="Submitted">{{ object.submitted_at|date:"Y-m-d H:i"|default:"â€”" }}</td>
                            <td class="actions-column mobile-no-label">{% include "object_management/status_actions_cell.html" %}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> There are no items currently in review.
        </div>
    {% endif %}
{% endblock list_table %}

{% block filters_pane_body %}
    <form method="get">
        {% crispy filter.form %}
        <div class="d-flex justify-content-end gap-2 mt-2">
            <button id="btn-filter" class="btn btn-primary submit-filter" type="submit">
                <i class="fas fa-filter"></i> Filter
            </button>
            <a class="btn btn-outline-secondary"
               href="{% url 'object_management:review_dashboard' %}"
               aria-label="Reset filters">
                <i class="fas fa-rotate-left"></i> Reset
            </a>
        </div>
    </form>
{% endblock filters_pane_body %}

{% block options_pane_body %}
    <p class="text-muted small">Review items from all models you have permission to moderate.</p>

    {% if page_obj %}
        <div class="card mb-2">
            <div class="card-body">
                <h6 class="card-title mb-2">
                    <i class="fas fa-chart-simple"></i> Statistics
                </h6>
                <p class="mb-1">
                    <strong>Total items:</strong> {{ page_obj.paginator.count }}
                </p>
            </div>
        </div>
    {% endif %}
{% endblock options_pane_body %}
