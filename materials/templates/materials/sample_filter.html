{% extends "filtered_list.html" %}
{% load crispy_forms_tags %}
{% load user_created_object_tags %}
{% load moderation_tags %}

{% block title %}
    BRIT | Materials | Samples
{% endblock title %}

{% block list_card_header %}
    <strong>Samples</strong>
{% endblock list_card_header %}

{% block list_table %}
    <div class="collection-list-min-height">
        <div class="table-responsive">
            <table class="table modern-table">
                <thead>
                    <tr>
                        <th>Sample</th>
                        {% if object_list.model|is_user_created %}<th class="actions-column">Status/Actions</th>{% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for object in object_list %}
                        <tr>
                            <td data-label="Sample" class="ps-3">
                                <a href="{% detail_or_review_url object use_back=True %}"
                                   class="text-decoration-none">
                                    <strong class="d-block">{{ object.name }}</strong>
                                    <span class="text-muted small">{{ object.material.name }}
                                        {% if object.created_at %}· {{ object.created_at|date:"Y-m-d" }}{% endif %}
                                        {% if object.standalone %}· Standalone{% endif %}
                                    </span>
                                </a>
                            </td>
                            {% if object_list.model|is_user_created %}
                                <td class="actions-column mobile-no-label">{% include "object_management/status_actions_cell.html" %}</td>
                            {% endif %}
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="{% if object_list.model|is_user_created %}2{% else %}1{% endif %}"
                                class="text-center text-muted py-4">
                                <div class="mb-3">
                                    <i class="fas fa-filter me-1"></i> No items match your current filters.
                                    <a href="{% if list_type == 'private' %}{{ object_list.model.private_list_url }}?scope=private{% else %}{{ object_list.model.public_list_url }}?scope=published{% endif %}"
                                       class="ms-2">Reset filters</a>
                                </div>
                                {% if not user.is_authenticated %}
                                    <div class="small">Log in to create new samples.</div>
                                {% elif create_permission in perms or user.is_staff %}
                                    <div class="small">Create your first sample to get started.</div>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock list_table %}

{% block options_pane_body %}
    {% if create_permission in perms or user.is_staff %}
        <a class="btn btn-success w-100 mb-2"
           href="{{ object_list.model.create_url }}"
           aria-label="Create new {{ object_list.model.get_verbose_name }}">
            <i class="fas fa-plus"></i> Create new {{ object_list.model.get_verbose_name }}
        </a>
    {% endif %}
{% endblock options_pane_body %}

{% block learning_tab_button %}
{% endblock learning_tab_button %}
{% block learning_tab_pane %}
{% endblock learning_tab_pane %}

{% block filter_body %}
    <form method="get">
        {% crispy filter.form %}
        <div class="d-flex justify-content-end gap-2 mt-2">
            <button id="btn-filter"
                    class="btn btn-sm btn-primary submit-filter"
                    type="submit">Filter</button>
            <a class="btn btn-sm btn-outline-secondary"
               href="{% if list_type == 'private' %}{{ object_list.model.private_list_url }}?scope=private{% else %}{{ object_list.model.public_list_url }}?scope=published{% endif %}"
               aria-label="Reset filters">Reset</a>
        </div>
    </form>
{% endblock filter_body %}
