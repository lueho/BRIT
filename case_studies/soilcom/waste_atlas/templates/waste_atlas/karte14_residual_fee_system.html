{% extends "waste_atlas/choropleth_map.html" %}

{% block atlas_config %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    WasteAtlasChoropleth.init({
      svgId:       'atlas-svg',
      containerId: 'map-container',
      loadingId:   'loading-overlay',
      country:     '{{ country }}',
      year:        parseInt('{{ year }}', 10) || 2024,
      title:       'Gebührensysteme der Restmüllabholung',
      dataUrl:     '/waste_collection/api/waste-atlas/residual-fee-system/',
      dataField:   'fee_system',
      categories: [
        { value: 'Flat fee',                label: 'Flat rate',          color: '#4daf4a' },
        { value: 'Flexible',                label: 'Flexibel',          color: '#00ced1' },
        { value: 'Flexible+',               label: 'Flexibel+',         color: '#ffd700' },
        { value: 'Pay as you throw (PAYT)', label: 'Pay as you throw',  color: '#4b2a60' }
      ],
      noDataColor: '#e0e0e0',
      noDataLabel: 'Keine Daten',
      legendTitle: 'Gebührensystem',
      fileBase:    'karte14_gebuehrensystem_restmuell'
    });
  });
</script>
{% endblock atlas_config %}
