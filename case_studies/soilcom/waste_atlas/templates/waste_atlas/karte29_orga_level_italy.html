{% extends "waste_atlas/choropleth_map.html" %}

{% block atlas_config %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    WasteAtlasChoropleth.init({
      svgId:       'atlas-svg',
      containerId: 'map-container',
      loadingId:   'loading-overlay',
      country:     '{{ country }}',
      year:        parseInt('{{ year }}', 10) || 2024,
      title:       'Administrative level of waste collection',
      dataUrl:     '/waste_collection/api/waste-atlas/orga-level/',
      dataField:   'orga_level',
      categories: [
        { value: 'nuts', label: 'NUTS level',                    color: '#93d163' },
        { value: 'lau',  label: 'LAU / municipal level',         color: '#72a0dd' },
        { value: 'individual', label: 'Other administrative level', color: '#d491f3' }
      ],
      noDataColor: '#e0e0e0',
      noDataLabel: 'No data',
      legendTitle: 'Organization level',
      fileBase:    'map29_orga_level_italy'
    });
  });
</script>
{% endblock atlas_config %}
