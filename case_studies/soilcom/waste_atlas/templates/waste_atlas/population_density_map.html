{% extends "waste_atlas/choropleth_map.html" %}

{% block atlas_config %}
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    WasteAtlasChoropleth.init({
      svgId:       'atlas-svg',
      containerId: 'map-container',
      loadingId:   'loading-overlay',
      country:     '{{ country }}',
      year:        parseInt('{{ year }}', 10) || 2024,
      title:       'Einwohnerdichte',
      dataUrl:     '/waste_collection/api/waste-atlas/population/',
      dataField:   'population_density',
      categories: [
        { label: 'Urban (> 1 500 / km²)',       color: '#ffea46', test: function (v) { return v > 1500; } },
        { label: 'Suburban (300 – 1 500 / km²)', color: '#7d7c78', test: function (v) { return v >= 300 && v <= 1500; } },
        { label: 'Rural (< 300 / km²)',          color: '#00204d', test: function (v) { return v < 300; } }
      ],
      noDataColor: '#e0e0e0',
      noDataLabel: 'Keine Daten',
      legendTitle: 'Einwohnerdichte',
      fileBase:    'karte20_population_density'
    });
  });
  </script>
{% endblock atlas_config %}
