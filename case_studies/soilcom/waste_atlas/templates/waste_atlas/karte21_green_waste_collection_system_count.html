{% extends "waste_atlas/choropleth_map.html" %}

{% block atlas_config %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    WasteAtlasChoropleth.init({
      svgId:       'atlas-svg',
      containerId: 'map-container',
      loadingId:   'loading-overlay',
      country:     '{{ country }}',
      year:        parseInt('{{ year }}', 10) || 2024,
      title:       'Anzahl GrÃ¼ngut-Sammelsysteme pro Einzugsgebiet',
      dataUrl:     '/waste_collection/api/waste-atlas/green-waste-collection-system-count/',
      dataField:   'collection_system_count',
      categories: [
        { label: '3 oder mehr Sammelsysteme', color: '#1b9e77', test: function (v) { return v >= 3; } },
        { label: '2 Sammelsysteme',           color: '#66a61e', test: function (v) { return v === 2; } },
        { label: '1 Sammelsystem',            color: '#a6d854', test: function (v) { return v === 1; } }
      ],
      noDataColor: '#e0e0e0',
      noDataLabel: 'Keine Daten',
      legendTitle: 'Anzahl Sammelsysteme',
      fileBase:    'karte21_green_waste_collection_system_count'
    });
  });
</script>
{% endblock atlas_config %}
