{% extends "detail_with_options.html" %}
{% load moderation_tags %}

{% object_policy object as policy %}

{% block detail_header_badge %}
    {% include "object_management/review_status_badge.html" with object=object %}
{% endblock detail_header_badge %}

{% block detail_header_actions %}
    <div class="btn-toolbar" role="toolbar" aria-label="Detail actions">
        <div class="btn-group me-2" role="group">
            <a class="btn btn-sm btn-outline-secondary"
               href="{{ object.collection.get_absolute_url }}"
               title="Collection">
                <i class="fas fa-arrow-left"></i>
                <span class="d-none d-md-inline">Collection</span>
            </a>
            {% if object.list_url %}
                <a class="btn btn-sm btn-outline-secondary"
                   href="{{ object.list_url }}"
                   title="List">
                    <i class="fas fa-list-ul"></i>
                    <span class="d-none d-md-inline">List</span>
                </a>
            {% endif %}
        </div>
        {{ block.super }}
    </div>
{% endblock detail_header_actions %}

{% block detail_body %}
    <p class="card-text">
        <strong>Collection:</strong>
        <br>
        <a href="{{ object.collection.get_absolute_url }}">{{ object.collection }}</a>
    </p>
    <p class="card-text">
        <strong>Property:</strong>
        <br>
        {{ object.property }}
    </p>
    <p class="card-text">
        <strong>Year:</strong>
        <br>
        {{ object.year }}
    </p>
    {% if object.standard_deviation %}
        <p class="card-text">
            <strong>Value:</strong>
            <br>
            {{ object.average }}
            Â± {{ object.standard_deviation }} {{ object.unit }}
        </p>
    {% else %}
        <p class="card-text">
            <strong>Value:</strong>
            <br>
            {{ object.average }} {{ object.unit }}
        </p>
    {% endif %}
    {% if object.sources.exists %}
        <p class="card-text">
            <strong>Sources:</strong>
        </p>
        <ul>
            {% for source in object.sources.all %}
                <li>
                    <a href="{{ source.get_absolute_url }}">{{ source.abbreviation }}</a>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock detail_body %}

{% block detail_footer %}
    {% block back_button %}
        <a href="{{ object.collection.get_absolute_url }}"
           onclick="history.back(); return false;"
           class="nowrap">
            <i class="fas fa-fw fa-arrow-left">
            </i> back
        </a>
    {% endblock back_button %}
    {% block list_link %}
        {% if object.list_url %}
            <a href="{{ object.list_url }}" class="ms-3">
                <i class="fas fa-fw fa-list">
                </i> see all
            </a>
        {% endif %}
    {% endblock list_link %}
    {% if policy.can_edit or policy.can_delete %}
        {% block update_link %}
            {% if policy.can_edit and object.update_url %}
                <a href="{{ object.update_url }}" class="ms-3">
                    <i class="fas fa-fw fa-edit">
                    </i> edit
                </a>
            {% endif %}
        {% endblock update_link %}
        {% block delete_link %}
            {% if policy.can_delete and object.modal_delete_url %}
                <a href="{{ object.modal_delete_url }}" class="modal-link ms-3">
                    <i class="fas fa-fw fa-trash">
                    </i> delete
                </a>
            {% endif %}
        {% endblock delete_link %}
    {% endif %}
    {% block additional_footer_links %}
    {% endblock additional_footer_links %}
{% endblock detail_footer %}
